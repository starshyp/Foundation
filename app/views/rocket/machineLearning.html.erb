<!DOCTYPE html>
<html lang="en">
	<head>
<!--		<link rel="icon" type="image/png" href="<%#= asset_path('faviconlogo.png') %>" />-->
		<meta charset="utf-8" />
		<title>Interventions Form-Rocket Elevators</title>
		<meta name="description" content="" />
		<meta name="Author" content="Dorin Grigoras [www.stepofweb.com]" />

		<!-- mobile settings -->
		<meta name="viewport" content="width=device-width, maximum-scale=1, initial-scale=1, user-scalable=0" />
		<!--[if IE]><meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'><![endif]-->

		<!-- WEB FONTS : use %7C instead of | (pipe) -->
		<link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,600%7CRaleway:300,400,500,600,700%7CLato:300,400,400italic,600,700" rel="stylesheet" type="text/css" />

	</head>

	<!--
		AVAILABLE BODY CLASSES:
		
		smoothscroll 			= create a browser smooth scroll
		enable-animation		= enable WOW animations

		bg-grey					= grey background
		grain-grey				= grey grain background
		grain-blue				= blue grain background
		grain-green				= green grain background
		grain-blue				= blue grain background
		grain-orange			= orange grain background
		grain-yellow			= yellow grain background
		
		boxed 					= boxed layout
		pattern1 ... patern11	= pattern background
		menu-vertical-hide		= hidden, open on click
		
		BACKGROUND IMAGE [together with .boxed class]
	
	-->
	<body>

		<!-- wrapper -->
		<div id="wrapper">

			<!-- 
				AVAILABLE HEADER CLASSES

				Default nav height: 96px
				.header-md 		= 70px nav height
				.header-sm 		= 60px nav height

				.b-0 		= remove bottom border (only with transparent use)
				.transparent	= transparent header
				.translucent	= translucent header
				.sticky			= sticky header
				.static			= static header
				.dark			= dark header
				.bottom			= header on bottom
				
				shadow-before-1 = shadow 1 header top
				shadow-after-1 	= shadow 1 header bottom
				shadow-before-2 = shadow 2 header top
				shadow-after-2 	= shadow 2 header bottom
				shadow-before-3 = shadow 3 header top
				shadow-after-3 	= shadow 3 header bottom

				.clearfix		= required for mobile menu, do not remove!

				Example Usage:  class="clearfix sticky header-sm transparent b-0"
			-->
			<div id="header" class="navbar-toggleable-md sticky clearfix">

				<!-- TOP NAV -->
				<header id="topNav">
					<div class="container">

						<!-- Mobile Menu Button -->
						<button class="btn btn-mobile" data-toggle="collapse" data-target=".nav-main-collapse">
							<i class="fa fa-bars"></i>
						</button>

						<!-- Logo -->
						<a class="logo float-left scrollTo" href="#top" style="background-color: #FFFFFF">
<!--							<img src="<%#= asset_path('R2.png') %>" alt="" />-->
						</a>

						<!-- 
							Top Nav 
							
							AVAILABLE CLASSES:
							submenu-dark = dark sub menu
						-->
						<div class="navbar-collapse collapse float-right nav-main-collapse submenu-dark">
							<nav class="nav-main">

								<!-- 
									.nav-onepage
									Required for onepage navigation links
									
									Add .external for an external link!
								-->
								<ul id="topMain" class="nav nav-pills nav-main nav-onepage">
									<li class="active"><!-- HOME -->
										<a id="home-nav" href="index">
											HOME
										</a>
									</li>
									<li><!-- SERVICES -->
										<li class="dropdown">
										<a class="dropdown-toggle" id="services-nav" href="index#services">
										  SERVICES
											</a>
										<ul class="dropdown-menu">
										  <li><a href="residential">Residential</a></li>
										  <li><a href="commercial">Commercial</a></li>
										</ul>
									</li>
									</li>
									<li><!-- PORTFOLIO -->
										<a id="portfolio-nav" href="index#PORTFOLIO">
											PORTFOLIO
										</a>
									</li>
									<li><!-- NEWS -->
										<a id="news-nav" href="index#news">
											NEWS
										</a>
									</li>

									<li><!-- CLIENTS -->
										<a id="clients-nav" href="index#clients">
											CLIENTS
										</a>
									</li>

									<li><!-- CONTACT -->
										<a id="contact-nav" href="index#contact">
											CONTACT
										</a>
									</li>
									<% if user_signed_in? && current_user&.is_employee?(current_user)%>
									<li><!-- INTERVENTIONS -->
										<a id="interventions-nav" href="/interventions">
											INTERVENTIONS
										</a>
									</li>
									<% end %>
									<% if user_signed_in? && current_user&.is_employee?(current_user)%>
									<li><!-- ADMIN -->
										<a id="admin-nav" href="/admin">
											ADMIN
										</a>
									</li>
									<% end %>
									<% if user_signed_in? %> 
                                    <li><!-- USERS logout -->
                                    <%= link_to "SIGN OUT", destroy_user_session_path, :method => :delete %>
                                    </li>
                                    <% else %>
                                    <li><!-- USERS login -->
                                     <%= link_to "LOGIN", new_user_session_path %>
                                    </li>
                                    <% end %>
								</ul>

							</nav>
						</div>

					</div>
				</header>
				<!-- /Top Nav -->

			</div>


			<!-- 
				PAGE HEADER 
				
				CLASSES:
					.page-header-xs	= 20px margins
					.page-header-md	= 50px margins
					.page-header-lg	= 80px margins
					.page-header-xlg= 130px margins
					.dark			= dark page header

					.shadow-before-1 	= shadow 1 header top
					.shadow-after-1 	= shadow 1 header bottom
					.shadow-before-2 	= shadow 2 header top
					.shadow-after-2 	= shadow 2 header bottom
					.shadow-before-3 	= shadow 3 header top
					.shadow-after-3 	= shadow 3 header bottom
			-->
			<!-- /PAGE HEADER -->
    <section style="margin-bottom:200px;">
    <div id="content" style="display: block">
        <table width="100%">
        <tr>
            <td align="right">Enrollment File</td>
            <td>
            <input type="file" id="filePicker" accept="" />
            </td>
        </tr>
        <tr>
            <td align="right">Test Identification File</td>
            <td>
            <input type="file" id="testFilePicker" accept=".wav" />
            </td>
        </tr>
        <tr>
            <td></td>
            <td><button id="createVoiceProfileButton">Create Voice Profile</button></td>
        </tr>
		<tr>
            <td></td>
            <td><button id="enrollmentButton">Create Enrollment</button></td>
        </tr>
        <tr>
            <td></td>
            <td><button id="identifySpeakerButton">Identify Speaker</button></td>
        </tr>
        <tr>
            <td></td>
            <td><button id="deleteProfileButton">Delete Voice Profile</button></td>
        </tr>
        <tr>
            <td align="right" valign="top">Result</td>
            <td><textarea id="resultDiv" style="display: inline-block;width:500px;height:200px"></textarea></td>
        </tr>
        </table>
  </div>
	<script>
	
	import base64 from "../../../../../../../.rvm/gems/ruby-2.6.6/gems/uglifier-4.2.0/lib/source-map";

  var createVoiceProfileButton = document.getElementById("createVoiceProfileButton");
	var enrollmentButton = document.getElementById("enrollmentButton");
	//Create Profile
	createVoiceProfileButton.addEventListener("click", function () {

        resultDiv.innerHTML = "";
		$(function() {
			var body = {
				"locale":"en-us"
			};
		
			$.ajax({
				url: "https://westus.api.cognitive.microsoft.com/spid/v1.0/identificationProfiles",
				beforeSend: function(xhrObj){
					// Request headers
					xhrObj.setRequestHeader("Content-Type","application/json");
					xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key","fbf90eddf1ef4ee0aca8fa47e129d0fb");
				},
				type: "POST",
				// Request body
				data: JSON.stringify(body),
			})
			.done(function(data) {
				alert("success");
				console.log(data);
			})
			.fail(function() {
				alert("error");
			});
		});
	});
	//Enrollment
  enrollmentButton.addEventListener("click", function () {
      $(function() {
          var fileUpload = $("#filePicker")[0];
          var file = fileUpload.files[0];
          var formData = new FormData();
          formData.append('file', file);
	
			var params = {
				// Request parameters
				"shortAudio": true,
          // "locale": "en-us",
          // "identificationProfileId": "0eb5d2f8-5cc6-4864-b86b-f6020ae48169",
          // "enrollmentStatus": "Enrolled",
          // "enrollmentsCount": 0,
          // "remainingEnrollments": 0,
          // "phrase": "Recognized verification phrase"
			};

			// var enroll = 'https://westus.api.cognitive.microsoft.com/spid/v1.0/identificationProfiles/b1c80602-7209-4df7-ab0f-194513764f7a/enroll?shortAudio=true';
      //
			// var request = new XMLHttpRequest();
			// request.open("POST", enroll, true);
      //
			// request.onload = function () {
			//     var location = request.getAllResponseHeader('Operation-Location');
      //
			//     if (location!=null) {
			//         pollForEnrollment(location, 'b1c80602-7209-4df7-ab0f-194513764f7a');
      //     } else {
			//         console.log('Error')
      //     }
      // };
      //
			// request.send(blob)

      $.ajax({
          url: "https://westus.api.cognitive.microsoft.com/spid/v1.0/identificationProfiles/b1c80602-7209-4df7-ab0f-194513764f7a/enroll?" + $.param(params),
          beforeSend: function(xhrObj){
              // Request headers
              xhrObj.setRequestHeader("Content-Type","audio/wav");
              xhrObj.setRequestHeader("Ocp-Apim-Subscription-Key","fbf90eddf1ef4ee0aca8fa47e129d0fb");
          },
          type: "POST",
          // Request body
          data: formData,
          processData: false,
          contentType: false,
      })
			.done(function(data) {
				alert("success");
				console.log(data);
			})
			.fail(function() {
				alert("error");
			});
		});
	});
	</script>
    </section>
			<!-- / -->

			<!-- FOOTER -->
			<footer id="footer">
				<div class="container">


					<div class="row">

						<!-- col #1 -->
						<div class="col-md-8">

							<h3 class="letter-spacing-1">WHY US?</h3>

							<!-- Small Description -->
							<p>
							We have the conviction that we create the most innovative and reliable products on the market. Contact us today for any questions you might have.

							</p>
							<h2>(418) 555-1234</h2>
						</div>
						<!-- /col #1 -->

						
					</div>


				</div>

				<div class="copyright">
					<div class="container">
						<ul class="float-right m-0 list-inline mobile-block">
							<li>Terms &amp; Conditions</li>
							<li>&bull;</li>
							<li>Privacy</li>
						</ul>
						&copy; All Rights Reserved, Rocket Elevators
					</div>
				</div>

			</footer>
			<!-- /FOOTER -->

		<!-- SCROLL TO TOP -->
		<a href="#" id="toTop"></a>


		<!-- JAVASCRIPT FILES -->
		<script>var plugin_path = 'assets/plugins/';</script>
        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>

</div>
	</body>
</html>